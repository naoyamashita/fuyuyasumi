<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>2年生 社会科 冬休みの宿題 用語を覚えよう！（練習編）</title>
  <style>
    :root { font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif; }
    body { margin: 0; background:#f6f7f9; color:#111; }
    .wrap { max-width: 820px; margin: 0 auto; padding: 20px; }
    .card { background:#fff; border-radius:16px; box-shadow: 0 8px 24px rgba(0,0,0,.08); padding: 18px; }
    h1 { font-size: 20px; margin: 0 0 12px; }
    .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .muted { color:#666; font-size: 13px; }
    .progress { height: 10px; background:#e8eaee; border-radius:999px; overflow:hidden; margin:10px 0; }
    .bar { height: 100%; width:0%; background:#111; transition: width .25s ease; }
    .qno { font-weight: 700; }
    .question { font-size: 18px; line-height: 1.6; margin: 10px 0 14px; }

    textarea {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid #cfd5df;
      font-size: 24px;      /* 文字サイズ1.5倍 */
      line-height: 1.6;
      resize: none;
      box-sizing: border-box;
    }
    textarea:focus {
      outline: none;
      border-color:#111;
      box-shadow: 0 0 0 3px rgba(0,0,0,.08);
    }

    button { border: 0; border-radius: 12px; padding: 11px 14px; font-size: 14px; cursor: pointer; }
    .primary { background:#111; color:#fff; }
    .ghost { background:#eef1f6; color:#111; }
    .feedback { margin-top: 12px; padding: 12px; border-radius: 12px; font-size: 14px; }
    .ok { background:#eaffea; }
    .ng { background:#ffecec; }
    details { background:#fff; border-radius: 12px; padding: 10px 12px; border: 1px solid #e4e7ee; }
    summary { cursor:pointer; font-weight: 600; }
    .small { font-size: 12px; color:#555; }
  </style>
</head>
<body>
<div class="wrap">

<!-- START -->
<div class="card" id="screen-start">
  <h1>2年生 社会科 冬休みの宿題 用語を覚えよう！（練習編）</h1>
  <p class="muted">全55問・ランダム出題。Enterキーで回答します。</p>
  <button class="primary" id="btn-start">はじめる</button>
</div>

<!-- QUIZ -->
<div class="card" id="screen-quiz" style="display:none;">
  <div class="row" style="justify-content:space-between;">
    <div><span class="qno" id="qno">1</span> / <span id="qtotal"></span></div>
    <div class="muted">正解数：<span id="score">0</span></div>
  </div>
  <div class="progress"><div class="bar" id="bar"></div></div>

  <div class="question" id="question"></div>

  <textarea id="answer" rows="2" placeholder="ここに回答を入力"></textarea>

  <div class="row" style="margin-top:10px;">
    <button class="primary" id="btn-submit">回答</button>
    <button class="ghost" id="btn-skip">スキップ</button>
  </div>

  <div class="feedback" id="feedback" style="display:none;"></div>
</div>

<!-- RESULT -->
<div class="card" id="screen-result" style="display:none;">
  <h1>結果</h1>
  <p id="finalScore"></p>
  <div class="row">
    <button class="primary" id="btn-retry">もう一度（全問）</button>
    <button class="ghost" id="btn-wrong">間違えた問題だけ復習</button>
    <button class="ghost" id="btn-review">解答レビュー</button>
  </div>
  <div id="review" style="display:none;margin-top:12px;"></div>
</div>

</div>

<script>
const NEXT_OK = 1000, NEXT_NG = 2200;

const QUESTIONS = [
  {q:"日本列島が属する造山帯",a:["環太平洋造山帯"]},
  {q:"江戸時代に、牛馬の処理などをさせられ、差別を受けていた身分",a:["えた","ひにん","えたひにん"]},
  {q:"黒潮から分かれて日本海に流れ込む暖流",a:["対馬海流"]},
  {q:"江戸時代の外様大名で、琉球王国との貿易が認められていた藩",a:["薩摩藩"]},
  {q:"大都市の近くで行われる新鮮なものを栽培する農業",a:["近郊農業"]},
  {q:"北海道に古くから住む先住民族",a:["アイヌ民族","アイヌ"]},
  {q:"温暖な気候を利用して、夏の野菜を別の季節に栽培する農業",a:["促成栽培"]},
  {q:"明治時代に北海道の開拓と警備にあたった農兵",a:["屯田兵"]},
  {q:"冷涼な気候を利用して、冬の野菜を別の季節に栽培する農業",a:["抑制栽培"]},
  {q:"植物の受粉を繰り返すことで、新たな種類を開発すること",a:["品種改良"]},
  {q:"人口が減少し、地域社会を維持することが困難な地域",a:["過疎地域"]},
  {q:"北海道の世界遺産で流氷が来ることで知られている場所",a:["知床半島","知床"]},
  {q:"人口が極端に集中している地域",a:["過密地域"]},
  {q:"東北地方の太平洋側に吹く、冷害をもたらす季節風",a:["やませ"]},
  {q:"特定の産業に頼った経済状態",a:["モノカルチャー経済"]},
  {q:"東北地方の中央部を南北に走る山脈",a:["奥羽山脈"]},
  {q:"主に河川の中流に形成される、水はけのよい地形",a:["扇状地"]},
  {q:"岩手県平泉市にある、奥州藤原氏がつくった世界遺産",a:["中尊寺"]},
  {q:"扇状地で行われやすい農業",a:["果樹栽培"]},
  {q:"静岡県の太平洋岸を中心に広がる工業地域",a:["東海工業地域"]},
  {q:"主に河川の下流に形成される、水はけのわるい地形",a:["三角州"]},
  {q:"愛知県・岐阜県・三重県に広がる工業地帯",a:["中京工業地帯"]},
  {q:"三角州で行われやすい農業",a:["稲作"]},
  {q:"北陸地方などで発展してきた、地域と結びついた産業",a:["地場産業"]},
  {q:"日本の工業地帯・工業地域が集中する茨城～北九州までの一帯",a:["太平洋ベルト"]},
  {q:"新潟県にある日本有数の米どころである平野",a:["越後平野"]},
  {q:"石炭や鉄鉱石の採掘がさかんで、日本の重要な貿易相手国",a:["オーストラリア"]},
  {q:"飛騨山脈・木曽山脈・赤石山脈の総称",a:["日本アルプス"]},
  {q:"沿岸部に石油の採掘がさかんな国が多くある湾",a:["ペルシャ湾"]},
  {q:"愛知県・岐阜県・三重県に広がる日本有数の平野",a:["濃尾平野"]},
  {q:"工場の海外移転などで、国内の産業が衰退すること",a:["産業の空洞化"]},
  {q:"豊田市や鈴鹿市のように、大企業の中心地とする都市",a:["産業都市"]},
  {q:"鹿児島県を中心とする、火山灰質の土地でできた台地",a:["シラス台地"]},
  {q:"享保の改革を行った人物",a:["徳川吉宗"]},
  {q:"火山の火口付近に形成される、くぼ地形",a:["カルデラ"]},
  {q:"寛政の改革を行った人物",a:["松平定信"]},
  {q:"1901年に現在の北九州市で操業を開始した製鉄所",a:["八幡製鉄所"]},
  {q:"天保の改革を行った人物",a:["水野忠邦"]},
  {q:"八幡製鉄所を中心として発展した工業地帯",a:["北九州工業地帯"]},
  {q:"江戸幕府の許可を得て、営業を独占した商工業者の同業者組合",a:["株仲間"]},
  {q:"九州北部の平野で、主に稲作が行われている場所",a:["筑紫平野"]},
  {q:"奥の細道を著し、俳諧を確立した人物",a:["松尾芭蕉"]},
  {q:"熊本県八代海沿岸で起きた、メチル水銀を原因とする公害",a:["水俣病"]},
  {q:"西洋の医学などをオランダ語で研究する学問",a:["蘭学"]},
  {q:"富山県の神通川流域で起きた、カドミウムを原因とする公害",a:["イタイイタイ病"]},
  {q:"日本全国の沿岸を調査して、日本地図をつくった人物",a:["伊能忠敬"]},
  {q:"三重県で発生した、大気汚染を原因とする公害",a:["四日市ぜんそく"]},
  {q:"フランス革命で出された自由・平等などをうたった宣言",a:["フランス人権宣言","人間と市民の権利の宣言"]},
  {q:"宗教改革のきっかけを作ったドイツ人の神学者",a:["ルター","マルティンルター","マルティン・ルター"]},
  {q:"18世紀後半にイギリスではじまった、産業や社会の変革",a:["産業革命"]},
  {q:"織田信長が鉄砲を用いて武田勝頼を破った戦い",a:["長篠の戦い"]},
  {q:"徳川綱吉が活動していたころに形成された、上方の文化",a:["元禄文化"]},
  {q:"豊臣秀吉が全国の土地や収穫量を測量した政策",a:["太閤検地"]},
  {q:"寛政の改革が行われていたころに形成された、江戸の文化",a:["化政文化"]},
  {q:"江戸時代に大名の統制のために出された法律",a:["武家諸法度"]}
];

const el=id=>document.getElementById(id);
let order=[],idx=0,score=0,log=[];

const norm=s=>s.replace(/[ 　]/g,"").toLowerCase();
const shuffle=a=>a.map(v=>[Math.random(),v]).sort(()=>Math.random()-0.5).map(v=>v[1]);

function show(scr){
  ["start","quiz","result"].forEach(s=>el("screen-"+s).style.display=s===scr?"":"none");
}

function start(custom=null){
  order = shuffle(custom ?? QUESTIONS.map((_,i)=>i));
  idx=0; score=0; log=[];
  el("score").textContent=0;
  el("qtotal").textContent=order.length;
  show("quiz");
  render();
}

function render(){
  const q=QUESTIONS[order[idx]];
  el("qno").textContent=idx+1;
  el("question").textContent=q.q;
  el("answer").value="";
  el("feedback").style.display="none";
  el("bar").style.width = (idx/order.length*100)+"%";
  el("answer").focus();
}

function submit(skip=false){
  const q=QUESTIONS[order[idx]];
  const user=skip?"":el("answer").value;
  const ok=!skip && q.a.map(norm).includes(norm(user));
  if(ok) score++;
  el("score").textContent=score;
  log.push({idx:order[idx],ok,user});
  el("feedback").style.display="";
  el("feedback").className="feedback "+(ok?"ok":"ng");
  el("feedback").innerHTML= ok?"✅ 正解":"❌ 正解："+q.a[0];
  setTimeout(()=>{
    idx++;
    idx>=order.length?result():render();
  },ok?NEXT_OK:NEXT_NG);
}

function result(){
  show("result");
  el("finalScore").textContent=`${score} / ${order.length} 正解`;
}

el("btn-start").onclick=()=>start();
el("btn-retry").onclick=()=>start();
el("btn-wrong").onclick=()=>{
  const wrong=log.filter(r=>!r.ok).map(r=>r.idx);
  if(!wrong.length) return alert("間違えた問題はありません！");
  start(wrong);
};
el("btn-review").onclick=()=>{
  const box=el("review");
  box.style.display=box.style.display?"":"block";
  box.innerHTML=log.map((r,i)=>
    `<details><summary>${i+1} ${r.ok?"✅":"❌"} ${QUESTIONS[r.idx].q}</summary>
     正解：${QUESTIONS[r.idx].a.join(" / ")}</details>`
  ).join("");
};
el("btn-submit").onclick=()=>submit(false);
el("btn-skip").onclick=()=>submit(true);

/*
document.addEventListener("keydown",e=>{
  if(el("screen-quiz").style.display!== "none" && e.key==="Enter"){
    e.preventDefault();
    submit(false);
  }
});
*/
// textareaで改行させない（複数行NG）
el("answer").addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    e.preventDefault(); // 改行を禁止
  }
});
</script>
</body>
</html>

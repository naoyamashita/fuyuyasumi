<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>不規則動詞クイズ（過去形／過去分詞）</title>

<style>
:root { font-family: system-ui, -apple-system, "Noto Sans JP", sans-serif; }
body { margin:0; background:#f6f7f9; color:#111; }
.wrap { max-width:860px; margin:0 auto; padding:20px; }
.card { background:#fff; border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,.08); padding:18px; }
h1 { font-size:20px; margin:0 0 12px; }
.row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
.muted { color:#666; font-size:13px; }
.progress { height:10px; background:#e8eaee; border-radius:999px; overflow:hidden; margin:10px 0; }
.bar { height:100%; width:0%; background:#111; transition:width .25s ease; }

.questionBox { padding:14px; border-radius:14px; background:#fbfcff; border:1px solid #e6e9f0; }
.tag { font-size:12px; background:#eef1f6; padding:2px 8px; border-radius:999px; }
.big { font-size:22px; font-weight:800; }
.code { font-family:ui-monospace, monospace; font-size:22px; font-weight:800; }

.grid2 { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:12px; }
@media(max-width:640px){ .grid2{grid-template-columns:1fr;} }

label { font-size:13px; color:#444; }
input[type="text"]{
  width:100%; padding:12px 14px;
  border-radius:12px; border:1px solid #cfd5df;
  font-size:18px; font-family:ui-monospace, monospace;
}
input:focus{ outline:none; border-color:#111; box-shadow:0 0 0 3px rgba(0,0,0,.08); }

button { border:0; border-radius:12px; padding:11px 14px; font-size:14px; cursor:pointer; }
.primary{background:#111;color:#fff;}
.ghost{background:#eef1f6;color:#111;}

.feedback{margin-top:12px;padding:12px;border-radius:12px;font-size:14px;}
.ok{background:#eaffea;}
.ng{background:#ffecec;}
</style>
</head>

<body>
<div class="wrap">

<div class="card" id="screen-start">
  <h1>不規則動詞クイズ（過去形／過去分詞）</h1>
  <p class="muted">
    意味と原形を見て、過去形・過去分詞を入力します（50問）。
    <br>※ 大文字・小文字は見た目に反映されますが、正誤判定には影響しません。
  </p>
  <button class="primary" id="btn-start">はじめる</button>
</div>

<div class="card" id="screen-quiz" style="display:none;">
  <div class="row" style="justify-content:space-between;">
    <div><strong id="qno">1</strong> / <span id="qtotal"></span></div>
    <div class="muted">
      過去形 <span id="sPast">0</span> /
      過去分詞 <span id="sPP">0</span> /
      両方 <span id="sBoth">0</span>
    </div>
  </div>

  <div class="progress"><div class="bar" id="bar"></div></div>

  <div class="questionBox">
    <div><span class="tag">意味</span> <span class="big" id="meaning"></span></div>
    <div style="margin-top:6px;"><span class="tag">原形</span> <span class="code" id="base"></span></div>
  </div>

  <div class="grid2">
    <div>
      <label>過去形</label>
      <input id="pastInput" type="text"
        autocapitalize="none" autocorrect="off" spellcheck="false">
    </div>
    <div>
      <label>過去分詞</label>
      <input id="ppInput" type="text"
        autocapitalize="none" autocorrect="off" spellcheck="false">
    </div>
  </div>

  <div class="row" style="margin-top:10px;">
    <button class="primary" id="btn-submit">回答</button>
    <button class="ghost" id="btn-skip">スキップ</button>
  </div>

  <div class="feedback" id="feedback" style="display:none;"></div>
</div>

<div class="card" id="screen-result" style="display:none;">
  <h1>結果</h1>
  <p id="finalScore"></p>
  <button class="primary" id="btn-retry">もう一度</button>
</div>

</div>

<script>
const QUESTIONS = [
 ["～になる","become",["became"],["become"]],
 ["始める","begin",["began"],["begun"]],
 ["こわす","break",["broke"],["broken"]],
 ["持ってくる","bring",["brought"],["brought"]],
 ["建てる","build",["built"],["built"]],
 ["買う","buy",["bought"],["bought"]],
 ["つかまえる","catch",["caught"],["caught"]],
 ["来る","come",["came"],["come"]],
 ["する","do",["did"],["done"]],
 ["飲む","drink",["drank"],["drunk"]],
 ["運転する","drive",["drove"],["driven"]],
 ["食べる","eat",["ate"],["eaten"]],
 ["落ちる","fall",["fell"],["fallen"]],
 ["感じる","feel",["felt"],["felt"]],
 ["見つける","find",["found"],["found"]],
 ["飛ぶ","fly",["flew"],["flown"]],
 ["忘れる","forget",["forgot"],["forgot","forgotten"]],
 ["得る","get",["got"],["got","gotten"]],
 ["与える","give",["gave"],["given"]],
 ["行く","go",["went"],["gone"]],
 ["もっている","have",["had"],["had"]],
 ["聞く","hear",["heard"],["heard"]],
 ["打つ","hit",["hit"],["hit"]],
 ["抱く","hold",["held"],["held"]],
 ["保つ","keep",["kept"],["kept"]],
 ["知っている","know",["knew"],["known"]],
 ["出発する","leave",["left"],["left"]],
 ["失う","lose",["lost"],["lost"]],
 ["つくる","make",["made"],["made"]],
 ["会う","meet",["met"],["met"]],
 ["置く","put",["put"],["put"]],
 ["読む","read",["read"],["read"]],
 ["走る","run",["ran"],["run"]],
 ["言う","say",["said"],["said"]],
 ["見る","see",["saw"],["seen"]],
 ["売る","sell",["sold"],["sold"]],
 ["送る","send",["sent"],["sent"]],
 ["見せる","show",["showed"],["shown"]],
 ["歌う","sing",["sang"],["sung"]],
 ["眠る","sleep",["slept"],["slept"]],
 ["話す","speak",["spoke"],["spoken"]],
 ["立つ","stand",["stood"],["stood"]],
 ["泳ぐ","swim",["swam"],["swum"]],
 ["持っていく","take",["took"],["taken"]],
 ["教える","teach",["taught"],["taught"]],
 ["思う","think",["thought"],["thought"]],
 ["勝つ","win",["won"],["won"]],
 ["理解する","understand",["understood"],["understood"]],
 ["書く","write",["wrote"],["written"]]
];

const el = id => document.getElementById(id);
const norm = s => String(s||"").trim().toLowerCase();
const shuffle = a => a.sort(()=>Math.random()-0.5);

let order=[], idx=0, sp=0, spp=0, sb=0;

function show(s){
 ["start","quiz","result"].forEach(v=>el("screen-"+v).style.display=v===s?"":"none");
}

function start(){
 order = shuffle([...Array(QUESTIONS.length).keys()]);
 idx=0; sp=spp=sb=0;
 el("qtotal").textContent=QUESTIONS.length;
 show("quiz"); render();
}

function render(){
 const q=QUESTIONS[order[idx]];
 el("qno").textContent=idx+1;
 el("meaning").textContent=q[0];
 el("base").textContent=q[1];
 el("pastInput").value="";
 el("ppInput").value="";
 el("feedback").style.display="none";
 el("bar").style.width=(idx/QUESTIONS.length*100)+"%";
}

function submit(skip=false){
 const q=QUESTIONS[order[idx]];
 const pOK=!skip && q[2].some(a=>norm(a)===norm(el("pastInput").value));
 const ppOK=!skip && q[3].some(a=>norm(a)===norm(el("ppInput").value));
 if(pOK) sp++; if(ppOK) spp++; if(pOK&&ppOK) sb++;
 el("sPast").textContent=sp;
 el("sPP").textContent=spp;
 el("sBoth").textContent=sb;

 const fb=el("feedback");
 fb.style.display="";
 fb.className="feedback "+(pOK&&ppOK?"ok":"ng");
 fb.innerHTML=`過去形：${pOK?"○":"×"} ／ 過去分詞：${ppOK?"○":"×"}<br>
 正解：${q[2][0]} / ${q[3].join(" / ")}`;

 setTimeout(()=>{
   idx++;
   idx>=QUESTIONS.length?result():render();
 }, (pOK&&ppOK)?900:1800);
}

function result(){
 show("result");
 el("finalScore").textContent=
  `過去形 ${sp} / 過去分詞 ${spp} / 両方 ${sb}`;
}

el("btn-start").onclick=start;
el("btn-submit").onclick=()=>submit(false);
el("btn-skip").onclick=()=>submit(true);
el("btn-retry").onclick=start;

// Enterは完全無効（社会と同じ）
["pastInput","ppInput"].forEach(id=>{
 el(id).addEventListener("keydown",e=>{
  if(e.key==="Enter") e.preventDefault();
 });
});
</script>
</body>
</html>
